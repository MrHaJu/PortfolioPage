{
  "version": 3,
  "sources": ["../../.pnpm/bricks.js@1.8.0/node_modules/bricks.js/dist/bricks.module.js"],
  "sourcesContent": ["var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar knot = function knot() {\n  var extended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var events = Object.create(null);\n\n  function on(name, handler) {\n    events[name] = events[name] || [];\n    events[name].push(handler);\n    return this;\n  }\n\n  function once(name, handler) {\n    handler._once = true;\n    on(name, handler);\n    return this;\n  }\n\n  function off(name) {\n    var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    handler ? events[name].splice(events[name].indexOf(handler), 1) : delete events[name];\n\n    return this;\n  }\n\n  function emit(name) {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // cache the events, to avoid consequences of mutation\n    var cache = events[name] && events[name].slice();\n\n    // only fire handlers if they exist\n    cache && cache.forEach(function (handler) {\n      // remove handlers added with 'once'\n      handler._once && off(name, handler);\n\n      // set 'this' context, pass args to handlers\n      handler.apply(_this, args);\n    });\n\n    return this;\n  }\n\n  return _extends({}, extended, {\n\n    on: on,\n    once: once,\n    off: off,\n    emit: emit\n  });\n};\n\nvar bricks = function bricks() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  // privates\n\n  var persist = void 0; // packing new elements, or all elements?\n  var ticking = void 0; // for debounced resize\n\n  var sizeIndex = void 0;\n  var sizeDetail = void 0;\n\n  var columnTarget = void 0;\n  var columnHeights = void 0;\n\n  var nodeTop = void 0;\n  var nodeLeft = void 0;\n  var nodeWidth = void 0;\n  var nodeHeight = void 0;\n\n  var nodes = void 0;\n  var nodesWidths = void 0;\n  var nodesHeights = void 0;\n\n  // resolve options\n\n  var packed = options.packed.indexOf('data-') === 0 ? options.packed : 'data-' + options.packed;\n  var sizes = options.sizes.slice().reverse();\n  var position = options.position !== false;\n\n  var container = options.container.nodeType ? options.container : document.querySelector(options.container);\n\n  var selectors = {\n    all: function all() {\n      return toArray(container.children);\n    },\n    new: function _new() {\n      return toArray(container.children).filter(function (node) {\n        return !node.hasAttribute('' + packed);\n      });\n    }\n  };\n\n  // series\n\n  var setup = [setSizeIndex, setSizeDetail, setColumns];\n\n  var run = [setNodes, setNodesDimensions, setNodesStyles, setContainerStyles];\n\n  // instance\n\n  var instance = knot({\n    pack: pack,\n    update: update,\n    resize: resize\n  });\n\n  return instance;\n\n  // general helpers\n\n  function runSeries(functions) {\n    functions.forEach(function (func) {\n      return func();\n    });\n  }\n\n  // array helpers\n\n  function toArray(input) {\n    var scope = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n    return Array.prototype.slice.call(input);\n  }\n\n  function fillArray(length) {\n    return Array.apply(null, Array(length)).map(function () {\n      return 0;\n    });\n  }\n\n  // size helpers\n\n  function getSizeIndex() {\n    // find index of widest matching media query\n    return sizes.map(function (size) {\n      return size.mq && window.matchMedia('(min-width: ' + size.mq + ')').matches;\n    }).indexOf(true);\n  }\n\n  function setSizeIndex() {\n    sizeIndex = getSizeIndex();\n  }\n\n  function setSizeDetail() {\n    // if no media queries matched, use the base case\n    sizeDetail = sizeIndex === -1 ? sizes[sizes.length - 1] : sizes[sizeIndex];\n  }\n\n  // column helpers\n\n  function setColumns() {\n    columnHeights = fillArray(sizeDetail.columns);\n  }\n\n  // node helpers\n\n  function setNodes() {\n    nodes = selectors[persist ? 'new' : 'all']();\n  }\n\n  function setNodesDimensions() {\n    // exit if empty container\n    if (nodes.length === 0) {\n      return;\n    }\n\n    nodesWidths = nodes.map(function (element) {\n      return element.clientWidth;\n    });\n    nodesHeights = nodes.map(function (element) {\n      return element.clientHeight;\n    });\n  }\n\n  function setNodesStyles() {\n    nodes.forEach(function (element, index) {\n      columnTarget = columnHeights.indexOf(Math.min.apply(Math, columnHeights));\n\n      element.style.position = 'absolute';\n\n      nodeTop = columnHeights[columnTarget] + 'px';\n      nodeLeft = columnTarget * nodesWidths[index] + columnTarget * sizeDetail.gutter + 'px';\n\n      // support positioned elements (default) or transformed elements\n      if (position) {\n        element.style.top = nodeTop;\n        element.style.left = nodeLeft;\n      } else {\n        element.style.transform = 'translate3d(' + nodeLeft + ', ' + nodeTop + ', 0)';\n      }\n\n      element.setAttribute(packed, '');\n\n      // ignore nodes with no width and/or height\n      nodeWidth = nodesWidths[index];\n      nodeHeight = nodesHeights[index];\n\n      if (nodeWidth && nodeHeight) {\n        columnHeights[columnTarget] += nodeHeight + sizeDetail.gutter;\n      }\n    });\n  }\n\n  // container helpers\n\n  function setContainerStyles() {\n    container.style.position = 'relative';\n    container.style.width = sizeDetail.columns * nodeWidth + (sizeDetail.columns - 1) * sizeDetail.gutter + 'px';\n    container.style.height = Math.max.apply(Math, columnHeights) - sizeDetail.gutter + 'px';\n  }\n\n  // resize helpers\n\n  function resizeFrame() {\n    if (!ticking) {\n      window.requestAnimationFrame(resizeHandler);\n      ticking = true;\n    }\n  }\n\n  function resizeHandler() {\n    if (sizeIndex !== getSizeIndex()) {\n      pack();\n      instance.emit('resize', sizeDetail);\n    }\n\n    ticking = false;\n  }\n\n  // API\n\n  function pack() {\n    persist = false;\n    runSeries(setup.concat(run));\n\n    return instance.emit('pack');\n  }\n\n  function update() {\n    persist = true;\n    runSeries(run);\n\n    return instance.emit('update');\n  }\n\n  function resize() {\n    var flag = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    var action = flag ? 'addEventListener' : 'removeEventListener';\n\n    window[action]('resize', resizeFrame);\n\n    return instance;\n  }\n};\n\nexport default bricks;\n"],
  "mappings": "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",
  "names": ["knot", "bricks"]
}
